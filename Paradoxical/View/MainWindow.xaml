<Window
    x:Class="Paradoxical.View.MainWindow"
    x:Name="Main"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    xmlns:local="clr-namespace:Paradoxical"
    xmlns:view="clr-namespace:Paradoxical.View"
    xmlns:viewmodel="clr-namespace:Paradoxical.ViewModel"
    xmlns:model="clr-namespace:Paradoxical.Model"
    xmlns:formatters="clr-namespace:Paradoxical.Formatters"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
    mc:Ignorable="d"
    Title="Paradoxical"
    d:DataContext="{d:DesignInstance viewmodel:MainViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    Height="900"
    Width="800"
    Style="{DynamicResource MaterialDesignWindow}"
    WindowStyle="None"
    WindowState="Normal"
    WindowStartupLocation="CenterScreen"
    ResizeMode="CanResizeWithGrip"
    TextElement.Foreground="{DynamicResource MaterialDesignBody}"
    TextElement.FontWeight="Regular"
    TextElement.FontSize="13"
    TextOptions.TextFormattingMode="Ideal"
    TextOptions.TextRenderingMode="Auto"
    Background="{DynamicResource MaterialDesignPaper}"
    FontFamily="{DynamicResource MaterialDesignFont}">
    <Window.DataContext>
        <viewmodel:MainViewModel />
    </Window.DataContext>
    <Window.InputBindings>
        <KeyBinding
            Command="{Binding NewModCommand}"
            Gesture="CTRL+N" />
    </Window.InputBindings>
    <Window.Resources>
    </Window.Resources>
    <materialDesign:DialogHost
        DialogTheme="Inherit"
        Identifier="RootDialog">
        <DockPanel>
            <!--#region Menu Bar -->
            <materialDesign:ColorZone
                DockPanel.Dock="Top"
                Padding="16"
                materialDesign:ElevationAssist.Elevation="Dp4"
                Mode="PrimaryMid"
                MouseDown="DragWindowMouseDownHandler">
                <DockPanel>
                    <materialDesign:PopupBox
                        DockPanel.Dock="Right"
                        PlacementMode="BottomAndAlignRightEdges"
                        StaysOpen="False">
                        <StackPanel>
                            <MenuItem
                                Header="New"
                                Icon="{materialDesign:PackIcon Kind=Create}"
                                Command="{Binding NewModCommand}"
                                InputGestureText="CTRL+N" />
                            <MenuItem
                                Header="Open"
                                Icon="{materialDesign:PackIcon Kind=FolderOpen}"
                                Command="{Binding OpenModCommand}"
                                InputGestureText="CTRL+O" />
                            <MenuItem
                                Header="Save"
                                Icon="{materialDesign:PackIcon Kind=ContentSave}"
                                Command="{Binding SaveModCommand}"
                                InputGestureText="CTRL+S" />
                            <MenuItem
                                Header="Export"
                                Icon="{materialDesign:PackIcon Kind=Export}"
                                Command="{Binding ExportModCommand}" />

                            <Separator />

                            <MenuItem
                                Header="Exit"
                                Icon="{materialDesign:PackIcon Kind=ExitToApp}"
                                Command="{Binding ExitCommand}"
                                InputGestureText="ALT+F4" />
                        </StackPanel>
                    </materialDesign:PopupBox>

                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="22"
                        Text="Paradoxical" />
                </DockPanel>
            </materialDesign:ColorZone>
            <!--#endregion-->
            <TabControl
                Margin="0,20,0,0"
                Style="{StaticResource MaterialDesignNavigationRailTabControl}"
                HorizontalContentAlignment="Center"
                materialDesign:ColorZoneAssist.Mode="PrimaryLight"
                materialDesign:NavigationRailAssist.SelectionCornerRadius="50"
                materialDesign:NavigationRailAssist.ShowSelectionBackground="True"
                TabStripPlacement="Bottom">
                <!--#region Mod Info Tab -->
                <TabItem
                    Margin="4">
                    <TabItem.Header>
                        <StackPanel
                            Width="auto"
                            Height="auto">
                            <materialDesign:PackIcon
                                Width="24"
                                Height="24"
                                HorizontalAlignment="Center"
                                Kind="Information" />
                            <TextBlock
                                HorizontalAlignment="Center"
                                Text="Info" />
                        </StackPanel>
                    </TabItem.Header>

                    <!--#region Mod Info Form -->
                    <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Disabled">
                        <Grid
                            Margin="20,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition
                                    Width="*"
                                    MinWidth="100" />
                                <ColumnDefinition
                                    Width="*"
                                    MinWidth="100" />
                                <ColumnDefinition
                                    Width="*"
                                    MinWidth="100" />
                                <ColumnDefinition
                                    Width="*"
                                    MinWidth="100" />
                                <ColumnDefinition
                                    Width="*"
                                    MinWidth="100" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition
                                    Height="auto" />
                                <RowDefinition
                                    Height="auto" />
                                <RowDefinition
                                    Height="auto" />
                                <RowDefinition
                                    Height="auto" />
                            </Grid.RowDefinitions>

                            <TextBox
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="3"
                                Margin="4"
                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                Text="{Binding ActiveMod.Name, Mode=TwoWay}"
                                materialDesign:HintAssist.Hint="Mod Name" />

                            <TextBox
                                Grid.Row="0"
                                Grid.Column="3"
                                Grid.ColumnSpan="1"
                                Margin="4"
                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                Text="{Binding ActiveMod.Version, Mode=TwoWay}"
                                materialDesign:HintAssist.Hint="Mod Version" />

                            <TextBox
                                Grid.Row="0"
                                Grid.Column="4"
                                Grid.ColumnSpan="1"
                                Margin="4"
                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                Text="{Binding ActiveMod.GameVersion, Mode=TwoWay}"
                                materialDesign:HintAssist.Hint="Game Version" />

                            <TextBox
                                Grid.Row="1"
                                Grid.Column="0"
                                Grid.ColumnSpan="5"
                                Margin="4"
                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                Text="{Binding ActiveMod.EventNamespace, Mode=TwoWay}"
                                materialDesign:HintAssist.Hint="Namespace"
                                materialDesign:HintAssist.HelperText="Used for events, file names, etc." />
                        </Grid>
                    </ScrollViewer>
                    <!--#endregion-->
                </TabItem>
                <!--#endregion-->
                <!--#region Events Tab -->
                <TabItem
                    Margin="4"
                    IsSelected="True">
                    <TabItem.Header>
                        <StackPanel
                            Width="auto"
                            Height="auto">
                            <materialDesign:PackIcon
                                Width="24"
                                Height="24"
                                HorizontalAlignment="Center"
                                Kind="FileImage" />
                            <TextBlock
                                HorizontalAlignment="Center"
                                Text="Events" />
                        </StackPanel>
                    </TabItem.Header>

                    <DockPanel
                        Margin="20,10">
                        <!--#region Event Tool Bar -->
                        <ToolBarTray
                            DockPanel.Dock="Top">
                            <ToolBar
                                ClipToBounds="False"
                                Style="{StaticResource MaterialDesignToolBar}">
                                <Button
                                    Command="{Binding AddEventCommand}"
                                    Content="{materialDesign:PackIcon Kind=Add}"
                                    ToolTip="Add Event" />
                                <Button
                                    Command="{Binding RemoveEventCommand}"
                                    Content="{materialDesign:PackIcon Kind=Remove}"
                                    ToolTip="Remove Event" />

                                <Separator />

                                <Button
                                    Command="{Binding PreviousEventCommand}"
                                    Content="{materialDesign:PackIcon Kind=NavigateBefore}"
                                    ToolTip="Previous Event" />
                                <Button
                                    Command="{Binding FindEventCommand}"
                                    Content="{materialDesign:PackIcon Kind=FileSearch}"
                                    ToolTip="Find Event" />
                                <Button
                                    Command="{Binding NextEventCommand}"
                                    Content="{materialDesign:PackIcon Kind=NavigateNext}"
                                    ToolTip="Next Event" />
                            </ToolBar>
                        </ToolBarTray>
                        <!--#endregion-->
                        <!--#region Event Form -->
                        <ScrollViewer
                            Grid.Column="1"
                            VerticalScrollBarVisibility="Hidden"
                            HorizontalScrollBarVisibility="Disabled">
                            <materialDesign:Card>
                                <StackPanel>
                                    <view:ScriptBox
                                        Margin="4,24,4,24"
                                        Style="{DynamicResource MaterialDesignRichTextBox}"
                                        Text="{Binding SelectedEvent.Title, Mode=TwoWay}"
                                        materialDesign:HintAssist.Hint="Title"
                                        materialDesign:HintAssist.IsFloating="True"
                                        materialDesign:TextFieldAssist.CharacterCounterVisibility="Visible"
                                        materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                        materialDesign:TextFieldAssist.TextFieldCornerRadius="4">
                                        <view:ScriptBox.TextFormatter>
                                            <formatters:EventTextFormatter />
                                        </view:ScriptBox.TextFormatter>
                                    </view:ScriptBox>

                                    <view:ScriptBox
                                        Height="120"
                                        Margin="4,24,4,24"
                                        Style="{DynamicResource MaterialDesignRichTextBox}"
                                        Text="{Binding SelectedEvent.Description, Mode=TwoWay}"
                                        materialDesign:HintAssist.Hint="Description"
                                        materialDesign:HintAssist.IsFloating="True"
                                        materialDesign:TextFieldAssist.CharacterCounterVisibility="Visible"
                                        materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                        materialDesign:TextFieldAssist.TextFieldCornerRadius="4"
                                        AcceptsReturn="True">
                                        <view:ScriptBox.TextFormatter>
                                            <formatters:EventTextFormatter />
                                        </view:ScriptBox.TextFormatter>
                                    </view:ScriptBox>

                                    <!--#region Display Section -->
                                    <Expander
                                        Header="Display"
                                        IsExpanded="True">
                                        <StackPanel>
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition
                                                        Height="auto" />
                                                    <RowDefinition
                                                        Height="auto" />
                                                    <RowDefinition
                                                        Height="auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition
                                                        Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <TextBox
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    Margin="4"
                                                    Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                    Text="{Binding SelectedEvent.Theme, Mode=TwoWay}"
                                                    materialDesign:HintAssist.Hint="Theme" />

                                                <TextBox
                                                    Grid.Row="1"
                                                    Grid.Column="0"
                                                    Margin="4"
                                                    Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                    Text="{Binding SelectedEvent.Background, Mode=TwoWay}"
                                                    materialDesign:HintAssist.Hint="Background" />

                                                <TextBox
                                                    Grid.Row="2"
                                                    Grid.Column="0"
                                                    Margin="4"
                                                    Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                    Text="{Binding SelectedEvent.Sound, Mode=TwoWay}"
                                                    materialDesign:HintAssist.Hint="Background" />
                                            </Grid>
                                        </StackPanel>
                                    </Expander>
                                    <!--#endregion-->
                                    <!--#region Main Portraits Section -->
                                    <Expander
                                        Header="Main Portraits"
                                        IsExpanded="True">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition
                                                    Height="auto" />
                                                <RowDefinition
                                                    Height="auto" />
                                                <RowDefinition
                                                    Height="auto" />
                                                <RowDefinition
                                                    Height="auto" />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition
                                                    Width="*"
                                                    MinWidth="100" />
                                                <ColumnDefinition
                                                    Width="4" />
                                                <ColumnDefinition
                                                    Width="*"
                                                    MinWidth="100" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="4,8,4,8"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                FontStyle="Italic"
                                                Text="Left Portrait" />

                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LeftPortrait.Character, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Character" />
                                            <TextBox
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LeftPortrait.Animation, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Animation" />
                                            <TextBox
                                                Grid.Row="3"
                                                Grid.Column="0"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LeftPortrait.OutfitTags, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Outfit Tags" />

                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Grid.ColumnSpan="2"
                                                Margin="4,8,4,8"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                FontStyle="Italic"
                                                Text="Right Portrait" />

                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.RightPortrait.Character, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Character" />
                                            <TextBox
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.RightPortrait.Animation, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Animation" />
                                            <TextBox
                                                Grid.Row="3"
                                                Grid.Column="2"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.RightPortrait.OutfitTags, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Outfit Tags" />
                                        </Grid>
                                    </Expander>
                                    <!--#endregion-->
                                    <!--#region Lower Portraits Section -->
                                    <Expander
                                        Header="Lower Portraits"
                                        IsExpanded="False">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition
                                                    Height="auto" />
                                                <RowDefinition
                                                    Height="auto" />
                                                <RowDefinition
                                                    Height="auto" />
                                                <RowDefinition
                                                    Height="auto" />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition
                                                    Width="*"
                                                    MinWidth="100" />
                                                <ColumnDefinition
                                                    Width="4" />
                                                <ColumnDefinition
                                                    Width="*"
                                                    MinWidth="100" />
                                                <ColumnDefinition
                                                    Width="4" />
                                                <ColumnDefinition
                                                    Width="*"
                                                    MinWidth="100" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="4,8,4,8"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                FontStyle="Italic"
                                                Text="Lower Left Portrait" />

                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerLeftPortrait.Character, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Character" />
                                            <TextBox
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerLeftPortrait.Animation, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Animation" />
                                            <TextBox
                                                Grid.Row="3"
                                                Grid.Column="0"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerLeftPortrait.OutfitTags, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Outfit Tags" />

                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Grid.ColumnSpan="2"
                                                Margin="4,8,4,8"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                FontStyle="Italic"
                                                Text="Lower Center Portrait" />

                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerCenterPortrait.Character, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Character" />
                                            <TextBox
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerCenterPortrait.Animation, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Animation" />
                                            <TextBox
                                                Grid.Row="3"
                                                Grid.Column="2"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerCenterPortrait.OutfitTags, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Outfit Tags" />

                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="4"
                                                Grid.ColumnSpan="2"
                                                Margin="4,8,4,8"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                FontStyle="Italic"
                                                Text="Lower Right Portrait" />

                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="4"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerRightPortrait.Character, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Character" />
                                            <TextBox
                                                Grid.Row="2"
                                                Grid.Column="4"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerRightPortrait.Animation, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Animation" />
                                            <TextBox
                                                Grid.Row="3"
                                                Grid.Column="4"
                                                Margin="4"
                                                Style="{DynamicResource MaterialDesignOutlinedTextBox}"
                                                Text="{Binding SelectedEvent.LowerRightPortrait.OutfitTags, Mode=TwoWay}"
                                                materialDesign:HintAssist.Hint="Outfit Tags" />
                                        </Grid>
                                    </Expander>
                                    <!--#endregion-->
                                    <!--#region Options Section -->
                                    <Expander
                                        Header="Options"
                                        IsExpanded="True">
                                        <ScrollViewer>
                                            <ItemsControl
                                                ItemsSource="{Binding SelectedEvent.Options}">

                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Expander>
                                    <!--#endregion-->
                                    <!--#region Triggers Section -->
                                    <Expander
                                        Header="Triggers"
                                        IsExpanded="False">
                                        <Grid>
                                        </Grid>
                                    </Expander>
                                    <!--#endregion-->
                                    <!--#region Immediate Effects Section -->
                                    <Expander
                                        Header="Immediate Effects"
                                        IsExpanded="False">
                                        <Grid>
                                        </Grid>
                                    </Expander>
                                    <!--#endregion-->
                                    <!--#region After Effects Section -->
                                    <Expander
                                        Header="After Effects"
                                        IsExpanded="False">
                                        <Grid>
                                        </Grid>
                                    </Expander>
                                    <!--#endregion-->
                                </StackPanel>
                            </materialDesign:Card>
                        </ScrollViewer>
                        <!--#endregion-->
                    </DockPanel>
                </TabItem>
                <!--#endregion-->
                <!--#region Triggers Tab -->
                <TabItem
                    Margin="4">
                    <TabItem.Header>
                        <StackPanel
                            Width="auto"
                            Height="auto">
                            <materialDesign:PackIcon
                                Width="24"
                                Height="24"
                                HorizontalAlignment="Center"
                                Kind="ArrowDecision" />
                            <TextBlock
                                HorizontalAlignment="Center"
                                Text="Triggers" />
                        </StackPanel>
                    </TabItem.Header>
                    <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Disabled">
                    </ScrollViewer>
                </TabItem>
                <!--#endregion-->
                <!--#region Effects Tab -->
                <TabItem
                    Margin="4">
                    <TabItem.Header>
                        <StackPanel
                            Width="auto"
                            Height="auto">
                            <materialDesign:PackIcon
                                Width="24"
                                Height="24"
                                HorizontalAlignment="Center"
                                Kind="Run" />
                            <TextBlock
                                HorizontalAlignment="Center"
                                Text="Effects" />
                        </StackPanel>
                    </TabItem.Header>
                    <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Disabled">
                    </ScrollViewer>
                </TabItem>
                <!--#endregion-->
            </TabControl>
        </DockPanel>
    </materialDesign:DialogHost>
</Window>
